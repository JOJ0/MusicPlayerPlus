#!/bin/bash
#
# mppsplash - display MusicPlayerPlus splash screen using asciimatics
#

usage() {
  printf "\nUsage: mppsplash [-a] [-c numcycles] [-j] [-m] [-p] [-u]"
  printf "\nWhere:"
  printf "\n\t-a indicates use all effects"
  printf "\n\t-c numcycles specifies the number of times to cycle"
  printf "\n\t-j indicates use Julia Set effect"
  printf "\n\t-m indicates use MusicPlayerPlus effect"
  printf "\n\t-p indicates use Plasma effect"
  printf "\n\t-u displays this usage message and exits\n"
  printf "\nWithout any options the MusicPlayerPlus effect will repeat"
  printf "\nType 'man mppsplash' for more detailed usage info\n"
  exit 1
}

all=
cycle=
script="musicplayerplus"
while getopts "ac:jmpu" flag; do
  case $flag in
      c)
        cycle="-c ${OPTARG}"
        ;;
      a)
        all=1
        ;;
      j)
        script="julia"
        ;;
      m)
        script="musicplayerplus"
        ;;
      p)
        script="plasma"
        ;;
      u)
        usage
        ;;
  esac
done

if [ "${all}" ]
then
  [ "${cycle}" ] || cycle="-c 1"
  numcycles=`echo ${cycle} | awk ' { print $2 } '`
  for script in julia musicplayerplus plasma
  do
    case ${script} in
      julia)
        python /usr/share/doc/musicplayerplus/mpcplus/${script}.py -c $(( 1000*numcycles ))
        ;;
      plasma)
        python /usr/share/doc/musicplayerplus/mpcplus/${script}.py -c $(( 10*numcycles ))
        ;;
      *)
        python /usr/share/doc/musicplayerplus/mpcplus/${script}.py ${cycle}
        ;;
    esac
  done
else
  python /usr/share/doc/musicplayerplus/mpcplus/${script}.py ${cycle}
fi
